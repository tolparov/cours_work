fun List<BasketRecord>.sortedBy(sortField: String?, sortOrder: String?): List<BasketRecord> {
    if (sortField == null || sortOrder == null) return this

    val comparator = when (sortField) {
        "date", "creationDate" -> compareBy<BasketRecord> { it.record.date }
        "name" -> compareBy(nullsLast()) { it.record.name?.lowercase() }
        "appId" -> compareBy(nullsLast()) { it.record.appId }
        "inn" -> compareBy(nullsLast()) { it.record.inn }
        "status" -> compareBy { it.record.status.lowercase() }
        "executorFio" -> compareBy(nullsLast()) { it.record.executorFio?.lowercase() }
        "type" -> compareBy { it.type }
        else -> return this // Неизвестное поле - не сортируем
    }

    return when (sortOrder.lowercase()) {
        "asc" -> this.sortedWith(comparator)
        "desc" -> this.sortedWith(comparator.reversed())
        else -> this // Неизвестный порядок - не сортируем
    }
}
